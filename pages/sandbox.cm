= Sandbox

Try things out:

{btn-sine: 1000}

@push
@chr hraw ///
{quint-code: ///
  const qm = mc.qm.$(divId, 2, true), [fg, bg, over] = mc.qm.fb(qm);
  // size without margins
  let m = 14, [sx, sy] = mc.qm.sz(qm);
  sx -= 2*m; sy -= 2*m;

  // centre
  let [cx, cy] = [m + sx/2, m + sy/2];

  // spiral
  let minPch = mc.toPch(1000/16), ctrPch = mc.toPch(1000), maxPch = mc.toPch(1000*16*Math.sqrt(2));
  let mp = mc.pitchSpiral;
  let sp = mp.$(bg, [cx, cy], sy/12, sy/2, minPch, ctrPch, maxPch);
  mp.markPitch(sp, ctrPch, 'red');

  // sine tones - buttons
  function sine(freq, label) {
    if (!label)
      label = freq,toString();
    let btn = over.appendChild(document.createElement('button'));
    btn.innerText = label;
    btn.classList.add('toggle');
    btn.onclick = function () {
      MC.Klang.tone(this, freq, 'sine');
      btn.classList.toggle('down');
    };

    let [x, y] = mp.toXY(sp, mc.toPch(freq));

    let style = btn.style;
    style.position = 'absolute';
    style.left = (x + cx - btn.clientWidth/2) + 'px';
    style.top  = (y + cy - btn.clientHeight/2) + 'px';
  }

  for (fl of [[100], [200], [1000, '1k']]) {
    let [freq, label] = fl;
    sine(freq, label);
  }
///| Pitch spiral + buttons}
@pop

---.diagram
--- table
(.plate Composer) ({>>}) (.plate=1x3 2)
({>>/})
(.plate Score)
({>>/})
(.plate Musician)
({>>/})
(.plate Instrument/Voice)
({>>/})
(.plate Concert Hall)
({>>/})
(.plate Audience)
---
---

#â¤Šâ¤‹â‡šâ‡›
#ğŸ¢€ ğŸ¢‚ ğŸ¢ ğŸ¢ƒ
#ğŸ¡¸ ğŸ¡º ğŸ¡¹ ğŸ¡»
#ğŸ¡ ğŸ¡’ ğŸ¡‘ ğŸ¡“
#ğŸ¡¨ ğŸ¡ª ğŸ¡© ğŸ¡«
#â‡¦ â‡¨ â‡§ â‡©
#â¬… ( â®• â¡ ) â¬†
#ğŸ ´ ğŸ ¶ ğŸ µ ğŸ ·
#ğŸ¡„ ğŸ¡† ğŸ¡… ğŸ¡‡
#ğŸ ˆ ğŸ Š ğŸ ‰ ğŸ ‹
#ğŸ œ ğŸ  ğŸ  ğŸ Ÿ

#== Audio

#These look like buttons, but are not:
#{btn:.r 440}
#{btn:.g 528}
#{btn:.b 660}
#{btn: 1000}

#This plays 1kHz:
#{btn-sine: 1000}

#These play a minor triad:
#{btn-sine:.r.toggle 440}
#{btn-sine:.g.toggle 528}
#{btn-sine:.b.toggle 660}

#With text:
#{btn-sine:.r.toggle a|440}
#{btn-sine:.g.toggle c|528}
#{btn-sine:.b.toggle e|660}

#Waveforms (442):
#{btn-sine:.toggle   sine     |442}
#{btn-square:.toggle square   |442}
#{btn-saw:.toggle    sawtooth |442}
#{btn-tri:.toggle    triangle |442}

#Noise:
#{btn-noise:.toggle white}
#{btn-noise:.toggle pink}
#{btn-noise:.toggle weiÃŸ | white}
#{btn-noise:.toggle rosa | pink}
