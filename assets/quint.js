let QuintMachine;(function(){let b;class a{constructor(a){this.dObj=a}static $(a){return a&&(a=new this(a),a.$()),a}$(){}}class c extends a{group(){let a=c.$(b.group.$());return b.group.add(this.dObj,a.dObj),a}rem(){b.group.rem(this.dObj)}p(a){return b.group.p(this.dObj,a),this}label(a,c,d=!1){return j.$(b.label.$(this.dObj,a,c,d))}line(a,c,d,e){return k.$(b.line.$(this.dObj,a,c,d,e))}spline(a,c,d){return n.$(b.spline.$(this.dObj,a,[],c,d))}wave(a){return p.$(b.spline.$(this.dObj,!0,[],a))}arc(a){return o.$(b.spline.$(this.dObj,!1,[],a))}circle(a,c,d){return l.$(b.circle.$(this.dObj,a,c,d))}handle(a,c){return l.$(b.handle.$(this.dObj,a,c))}slider(a,c){return m.$(b.slider.$(this.dObj,a,c))}grid(a,c,d,f){return e.$(b.grid.$(this.dObj,a,c,d,f))}polarGrid(a,c,d,e){return f.$(b.polarGrid.$(this.dObj,a,c,d,e))}loglinGrid(a,c,d,e,f,h,i,j){return g.$(b.loglinGrid.$(this.dObj,a,c,d,e,f,h,i,j))}spiral(a,c,d,e,f,g){return s.$(b.spiral.$(this.dObj,a,c,d,e,f,g))}pitchSpiral(a,c,d,e,f,g){return t.$(b.pitchSpiral.$(this.dObj,a,c,d,e,f,g))}}class d extends c{}class e extends d{}class f extends e{toXY(a,c){return b.polarGrid.toXY(this.dObj,a,c)}}class g extends e{toXY(a,c){return b.loglinGrid.toXY(this.dObj,a,c)}fromXY(a,c){return b.loglinGrid.fromXY(this.dObj,a,c)}xLegend(a){return b.loglinGrid.xLegend(this.dObj,a)}yLegend(a){return b.loglinGrid.yLegend(this.dObj,a)}}class h extends a{stroke(a){return b.node.stroke(this.dObj,a),this}fill(a){return b.node.fill(this.dObj,a),this}color(a){return b.node.color(this.dObj,a),this}width(a){return b.node.width(this.dObj,a),this}solidStroke(a){return b.node.solidStroke(this.dObj,a),this}dottedStroke(a){return b.node.dottedStroke(this.dObj,a),this}dashedStroke(a){return b.node.dashedStroke(this.dObj,a),this}}class i extends h{movable(a){return b.shape.movable(this.dObj,a),this}moveTo(a){return b.shape.moveTo(this.dObj,a),this}arrowBeg(){return b.shape.markerBeg(this.dObj,'url(#arrowBeg)'),this}arrowEnd(){return b.shape.markerEnd(this.dObj,'url(#arrowEnd)'),this}}class j extends i{center(){return b.label.center(this.dObj),this}leftCenter(){return b.label.leftCenter(this.dObj),this}}class k extends i{set(a,c){return b.line.set(this.dObj,a,c),this}}class l extends i{closeTo(a){return b.circle.closeTo(this.dObj,a)}atr(a){return b.circle.atr(this.dObj,a)}atp(a){return b.circle.atp(this.dObj,a)}}class m extends c{$(){this.min(0),this.max(1)}min(a){return this._min=a,this}max(a){return this._max=a,this}_toScale(a){return this._min+a*(this._max-this._min)}_fromScale(a){return(a-this._min)/(this._max-this._min)}val(a){return b.slider.val(this.dObj,this._fromScale(a)),this}onVal(a){return b.slider.onVal(this.dObj,(b)=>a(this._toScale(b))),this}}class n extends h{setPath(a,c,d){return b.spline.set(this.dObj,a,c,d),this}sc(a){return b.spline.sc(this.dObj,a),this}tr(a){return b.spline.tr(this.dObj,a),this}}class o extends n{static $(a){return super.$(a).set()}set(a,b,c,d){return this.aBeg=+a,this.aEnd=+b,this.setPath(c,d)}setPath(c,d){var e=Math.max;let f=[];const g=(c)=>f.push(b.toXY([1,-c]));let h=this.aBeg;const a=e(h,this.aEnd),i=Math.min(15,e(1,(a-h)/6));for(g(h);(h+=i)<a;)g(h);return g(a),super.setPath(f,c,d),this}}class p extends n{$(){this.set()}ampl(a,c){return void 0===c&&(c=this.ph),b.degSin(360*(a+c))}set(a=0,b=0,c,d){return this.cycles=+a,this.ph=+b,this.setPath(c,d)}setPath(a,b){let c=[];const d=this.cycles;if(d){const a=Math.ceil(12*d);for(let b,e=-1;e<=a+1;++e)b=e/a*d,c.push([b,-this.ampl(b)])}return super.setPath(c,a,b),this}}class q extends c{}class r extends q{}class s extends r{}class t extends s{markPitch(a,c,d){return b.pitchSpiral.markPitch(this.dObj,a,c,d),this}toXY(a){return b.pitchSpiral.toXY(this.dObj,a)}}class u extends a{fbo(){const[a,d,e]=b.qm.fbo(this.dObj);return[c.$(a),c.$(d),v.$(e)]}sz(a=14){const c=this.margin=a,[d,e]=b.qm.sz(this.dObj),f=c,g=d-c,h=c,i=e-c;return[g-f,i-h,d/2,e/2,f,g,h,i]}m(){return this.margin}degSin(a){return b.degSin(a)}degCos(a){return b.degCos(a)}toPch(a){return b.toPch(a)}toCps(a){return b.toCps(a)}toRA(a){return b.toRA(a)}toXY(a){return b.toXY(a)}}class v extends a{controls(){return this.qmControls||(this.qmControls=this.addChild('div','controls'))}addChild(a,b){let c=v.$(this.dObj.appendChild(document.createElement(a)));return b&&c.dObj.classList.add(b),c}addLabel(a){let b=this.addChild('label');return b.dObj.innerText=a,b}addInput(a){let b=this.addChild('input',a);return b.dObj.type=a,b}addButton(a,b=!1,c){const e=this.addChild('button'),f=e.dObj;return f.innerText=a,b&&f.classList.add('toggle'),f.onclick=c,e.toggle=()=>f.classList.toggle('down'),e}addRange(a,b,c,e){const f=this.addInput('range'),g=f.dObj;return g.min=a,g.max=b,g.step=0<c?c:(b-a)/60,f.value=()=>f.dObj.value,f.setValue=(a)=>f.dObj.value=a,f.setValue(a),g.oninput=e,f}addRadio(a,b,c){let d=this.addInput('radio');return a&&(d.dObj.name=a),b&&this.addLabel(b),c&&(d.dObj.onclick=c),d.check=()=>d.dObj.checked=!0,d}addCheck(a,b){let c=this.addInput('checkbox');return a&&this.addLabel(a),b&&(c.dObj.onchange=b),c.check=()=>c.dObj.checked=!0,c}br(){return this.addChild('br'),this}centerAt(a){const[b,c]=a,e=this.dObj;let d=e.style;d.position='absolute',d.left=b-e.clientWidth/2+'px',d.top=c-e.clientHeight/2+'px'}}QuintMachine=function(a,c=2){b=QuintMachine_dart$;const d=u.$(b.qm.$(a,c));return b.qm.arrowBegEnd(d.dObj),d}})();