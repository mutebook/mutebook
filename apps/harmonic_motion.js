!function(t){var s={};function e(r){if(s[r])return s[r].exports;var i=s[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}e.m=t,e.c=s,e.d=function(t,s,r){e.o(t,s)||Object.defineProperty(t,s,{configurable:!1,enumerable:!0,get:r})},e.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},e.n=function(t){var s=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(s,"a",s),s},e.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)},e.p="",e(e.s=0)}([function(t,s,e){"use strict";function r(){r.made||(r.made=!0,Object.prototype.forAll=function(t){if(this instanceof Object)for(const s in this)this.hasOwnProperty(s)&&t(this[s],s);else t(this,0)},Array.prototype.forAll=function(t){this.forEach((s,e)=>t(s,e))},Array.prototype.insert=function(t,s){this.splice(t,0,s)})}function i(t=n.NaN){return t instanceof n?t:new n(t)}e.r(s);class n extends Number{constructor(t=n.NaN){super(t.valueOf())}$(t){return new this.constructor(t)}get isNaN(){return Number.isNaN(this.valueOf())}get isDef(){return!this.isNaN}get isPos(){return 0<this}get isNeg(){return 0>this}get is0(){return 0==this}get abs(){return this.$(Math.abs(this))}isNear(t){return 1e-8>this.sub(t).abs}add(t){return this.$(this+t)}sub(t){return this.$(this-t)}mul(t){return this.$(this*t)}div(t){return this.$(this/t)}neg(){return this.$(-this)}idv(t){return this.$(Math.floor(this/t))}mod(t){return this.$(this%t)}eq(t){return this.valueOf()==t}ne(t){return this.valueOf()!=t}lt(t){return this.valueOf()<t}le(t){return this.valueOf()<=t}gt(t){return this.valueOf()>t}ge(t){return this.valueOf()>=t}floor(){return this.$(Math.floor(this))}ceil(){return this.$(Math.ceil(this))}round(){return this.$(Math.round(this))}negate(t){return t?this.neg():this}norm(t,s){let e=this.valueOf();if(e<t||s<=e){const r=s-t;e-=t,e-=Math.floor(e/r)*r,(e+=t)>=s&&(e=t)}return this.$(e)}clamp(t,s){return this.$(Math.max(Math.min(this,s),t))}clamp01(){return this.clamp(0,1)}min(t){return this.$(Math.min(this,t))}max(t){return this.$(Math.max(this,t))}inv(){return this.$(this.is0?n.NaN:1/this)}sqrt(){return this.$(Math.sqrt(this))}log2(){return this.$(Math.log(this)*Math.LOG2E)}exp2(){return this.$(Math.exp(this/Math.LOG2E))}log10(){return this.$(Math.log(this)*Math.LOG10E)}exp10(){return this.$(Math.exp(this/Math.LOG10E))}pow(t){return this.$(Math.pow(this,t))}sin(){return this.$(Math.sin(this))}cos(){return this.$(Math.cos(this))}tan(){return this.$(Math.tan(this))}asin(){return this.$(Math.asin(this))}acos(){return this.$(Math.acos(this))}atan(){return this.$(Math.atan(this))}fromScale(t,s){return i(t+this*(s-t))}intoScale(t,s){return i((this-t)/(s-t))}scale(t,s,e,r){return this.intoScale(t,s).fromScale(e,r)}}function h(t=n.NaN){return new o(t)}n.rand=((t,s)=>i(t+Math.random()*(s-t)));class o extends n{toDeg(){return l(this/Math.PI*180)}}function l(t=n.NaN){return new a(t)}class a extends n{toRad(){return h(this*Math.PI/180)}sin(){return this.toRad().sin()}cos(){return this.toRad().cos()}tan(){return this.toRad().tan()}asin(){return h(super.asin()).toDeg()}acos(){return h(super.acos()).toDeg()}atan(){return h(super.atan()).toDeg()}}function u(t,s){return new _(t,s)}function c(){return u(0,0)}class _{constructor(t,s){0>t&&(t=-t,s+=180),this._r=t.valueOf(),this._a=i(s).norm(0,360).valueOf()}get r(){return i(this._r)}get a(){return l(this._a)}toString(){return`[${this.r}\\${this.a}]`}get is0(){return 0==this.r}isNear(t){return this.r.isNear(t.r)&&this.a.isNear(t.a)}add(t){return this.toXY().add(t.toXY()).toRA()}eq(t){return this._r==t.r&&this._a==t.a}toXY(){return p(this._r*this.a.cos(),this._r*this.a.sin())}}function d(t,s){return t instanceof m?t:Array.isArray(t)?m.fromArray(t):null==t?null:p(t,s)}function p(t,s){return new m(t,s)}function g(){return p(0,0)}function f(t){return p(t,t)}_._0=c(),_.fromArray=(t=>u(t[0],t[1]));class m{constructor(t,s){this._x=t.valueOf(),this._y=s.valueOf()}get x(){return i(this._x)}get y(){return i(this._y)}toString(){return`[${this._x}:${this._y}]`}toArray(){return[this.x,this.y]}_toSvg(){return`${this._x.toFixed(1)} ${this._y.toFixed(1)}`}get is0(){return this.eq(m._0)}isNear(t){return this.x.isNear(t.x)&&this.y.isNear(t.y)}add(t){return t instanceof m?p(this._x+t._x,this._y+t._y):p(this._x+t,this._y+t)}sub(t){return t instanceof m?p(this._x-t._x,this._y-t._y):p(this._x-t,this._y-t)}mul(t){return t instanceof m?p(this._x*t._x,this._y*t._y):p(this._x*t,this._y*t)}div(t){return t instanceof m?p(this._x/t._x,this._y/t._y):p(this._x/t,this._y/t)}neg(){return p(-this._x,-this._y)}mag(){return i(this._x*this._x+this._y*this._y)}lgt(){return this.mag().sqrt()}dot(t){return i(this._x*t.x+this._y*t.y)}cross(t){return i(this._x*t.y-this._y*t.x)}unit(){const t=this.lgt();return 0<t?this.div(t):p(1,0)}eq(t){return this._x==t.x&&this._y==t.y}ne(t){return!this.eq(t)}min(){return Math.min(this._x,this._y)}max(){return Math.max(this._x,this._y)}toRA(){const t=this.lgt();if(t.le(0))return c();const s=this.x,e=this.y;return u(t,s.isNear(0)?e.isNear(0)?0:e.isPos?90:270:l(e.div(s)).atan().add(s.isPos?0:180))}}m._0=g(),m.fromArray=(t=>p(t[0],t[1])),m.fromXY=(t=>p(t.x,t.y)),m.fromWH=(t=>p(t.width,t.height)),r();class x{constructor(t){this.el=x.elSel(t)}get isShown(){return!this.hasClass("hidden")}show(t=!0){this.toggleClass("hidden",!t)}hide(){this.show(!1)}get style(){return this.el.style}set width(t){this.style.width=`${t}px`}set height(t){this.style.height=`${t}px`}set color(t){this.style.color=t}set background(t){this.style.background=t}addClass(t){t.forAll(t=>this.el.classList.add(t))}remClass(t){t.forAll(t=>this.el.classList.remove(t))}toggleClass(t,s){t.forAll(t=>this.el.classList.toggle(t,s))}hasClass(t){return this.el.classList.contains(t)}get sz(){return p(this.el.clientWidth,this.el.clientHeight)}set sz(t){this.width=t.x,this.height=t.y}get bsz(){return m.fromWH(this.el.getBoundingClientRect())}}x.elSel=(t=>t instanceof Element?t:t instanceof x?t.el:document.querySelector(t));class A extends x{constructor(t,s=null){super(t),this._onWindowResize=null,s&&(this.sz=s),this._resizeEvent(),window.addEventListener("resize",this._resizeEvent)}get minSize(){return 0}_resizeEvent(){this._onWindowResize&&this._onWindowResize(p(window.innerWidth,window.innerHeight))}set onWindowResize(t){this._onWindowResize=t,this._resizeEvent()}availableRectangle(){const t=this.el.parentElement;return p(t.clientWidth,t.clientHeight)}}function v(t,s){return new w(t,s)}function y(){return v(m._0,m._0)}class w{constructor(t,s){this.tr=d(t),this.sc=d(s)}toString(){return`(${this.tr}/${this.sc})`}get is0(){return this.tr.is0&&this.sc.is0}isNear(t){return this.tr.isNear(t.tr)&&this.sc.isNear(t.sc)}eq(t){return this.tr.eq(t.tr)&&this.sc.eq(t.sc)}svgString(){let t="";return this.tr.is0||(t+=`translate(${this.tr.x} ${this.tr.y}) `),this.sc.is0||(t+=`scale(${this.sc.x} ${this.sc.y})`),t}add(t){return v(this.tr.add(t.tr),this.sc.add(t.sc))}}w._0=y();class b{}b.navigator=window.navigator,b.userAgent=b.navigator.userAgent,b.isChrome=!!b.userAgent.match("Chrome"),b.isFF=!!b.userAgent.match("Firefox"),b.isSafari=!b.isChrome&&!!b.userAgent.match("Safari"),b.isIOS=!!b.userAgent.match("iPad|iPhone|iPod"),b.alert=(t=>window.alert(t.toString())),b.touchPoints=b.isIOS?1:b.navigator.maxTouchPoints?b.navigator.maxTouchPoints:0,b.isTouch=b.touchPoints>0,b.oneStream=((t,s,e,r)=>t.addEventListener(b.isTouch?e:s,r)),r();class ${constructor(){this.group=null,this.scene=null,this.el=null,this._sceneNodeAttrs()}_setScene(t){this.scene=t}_setGroup(t){this.group=t,this._setScene(t.scene)}getAttr(t){return this.el.getAttribute(t)}setAttr(t,s){s?this.el.setAttribute(t,s):this.el.removeAttribute(t)}setAttrs(t){t.forAll((t,s)=>this.setAttr(s,t))}isShown(){return"none"!=this.getAttr("display")}show(t=!0){this.setAttr("display",t?"":"none")}hide(){this.show(!1)}set stroke(t){this.setAttr("stroke",t)}get stroke(){return this.getAttr("stroke")}set fill(t){this.setAttr("fill",t)}get fill(){this.getAttr("fill")}set color(t){this.stroke=t,this.fill=t}set width(t){this.setAttr("stroke-width",t)}set lineCap(t){this.setAttr("stroke-linecap",t)}set lineJoin(t){this.setAttr("stroke-linejoin",t)}set dashArray(t){this.setAttr("stroke-dasharray",t)}solidStroke(t=null){this.dashArray=null,t&&(this.stroke=t)}dottedStroke(t=null){this.dashArray="1,3",t&&(this.stroke=t)}dashedStroke(t=null){this.dashArray="3,2",t&&(this.stroke=t)}$attrs(){this._sceneNodeAttrs()}_sceneNodeAttrs(){}}class k extends ${constructor(){super(),this.nodes=[],this._trf=y(),this.el=E.elem("g"),this._bg=null,this._fg=null,this._groupNodeAttrs()}_setScene(t){super._setScene(t),this.nodes.forAll(s=>s._setScene(t))}isRoot(){return null==this.group}isEmpty(){return!!this.nodes.length}back(t){return this.nodes.length?(this.nodes.unshift(t),this.el.insertBefore(t.el,this.el.firstChild),t._setGroup(this),t):this.front(t)}front(t){return this.nodes.push(t),this.el.appendChild(t.el),t._setGroup(this),t}clear(){let t;for(this.nodes=[];t=this.el.firstChild;)this.el.removeChild(t)}get g(){return this.front(new k)}get bg(){return this._bg?this._bg:this._bg=this.back(new k)}get fg(){return this._fg?this._fg:this._fg=this.front(new k)}get trf(){return this._trf}set trf(t){this._trf=t,this._attrTR()}get p(){return this._trf.tr}set p(t){this.trf=v(t,this.trf.sc)}get gp(){return null==this.group?this.p:this.parent.p.add(this.p)}set sc(t){this.trf=v(this.trf.tr,t)}$attrs(){super.$attrs(),this._groupNodeAttrs()}_attrTR(){this.setAttr("transform",this._trf.svgString())}_groupNodeAttrs(){this._attrTR()}}class M extends k{constructor(){super(),this.labels=[]}centerLabels(){this.labels.forAll(t=>t.center())}}class P extends M{constructor(t){super(),this.container=t,this.scene=this,this.el=t.innerElem,this._lastPointerPos=g(),this.offX=0,this.offY=0,this.cursor=null,this._sceneAttrs()}interactive(){function t(t){return p(t.clientX,t.clientY)}let s;b.oneStream(this.el,"mousedown","touchstart",e=>{this._mn&&(s=this._mn.p.sub(t(e)))}),b.oneStream(this.el,"mousemove","touchmove",e=>{e.preventDefault(),this._mn&&this._mn.moveTo(s.add(t(e)),!0)}),b.oneStream(this.el,"mouseup","touchend",t=>{this._mn=null}),this._mn=null}_move(t){this._mn=t}$attrs(){super.$attrs(),this._sceneAttrs()}_sceneAttrs(){this.stroke="black",this.fill="none",this.width=1,this.lineCap="round"}}class S extends A{constructor(t,s,e=null){super(t,e),this.el.append(this.innerElem=s),this.style.position="relative";const r=s.style;r.position="absolute",r.width="100%",r.height="100%",this.scene=new P(this)}get minSize(){return 32}get bg(){return this.scene.bg}get fg(){return this.scene.fg}setMouse(t){this.el.addEventListener("mousedown",()=>{this._isMouseDown=!0}),this.el.addEventListener("mouseup",()=>{this._isMouseDown=!1}),this.el.addEventListener("mousemove",s=>{this._isMouseDown&&s.preventDefault(),t(p(s.offsetX,s.offsetY))})}}class E extends S{constructor(t,s=null){super(t,E.elem("svg"),s)}get svgElem(){return this.innerElem}}E.elem=(t=>document.createElementNS("http://www.w3.org/2000/svg",t)),E.div=((t=null)=>{const s=(t,s=null)=>{const e=document.createElement(t);return s&&e.classList.add(s),e},e=s("div",t),r=(t,r=null)=>e.appendChild(s(t,r));return e.br=(()=>(e.appendChild(s("br")),e)),e.label=(t=>{const s=r("label");return s.innerText=t,s}),e.input=(t=>{const s=r("input");return s.type=t,s}),e.radio=((t,s=null,r=null)=>{let i=e.input("radio");return t&&(i.name=t),s&&e.label(s),r&&(i.onclick=r),i.check=(()=>i.checked=!0),i}),e.button=((t,s=!1,e=null)=>{const i=r("button");return i.innerText=t,s&&(i.classList.add("toggle"),i.toggle=(()=>i.classList.toggle("down"))),e&&(i.onclick=e),i}),e.check=((t=null,s=!1)=>{let r=e.input("checkbox");return t&&e.label(t),s&&(r.onchange=(()=>s(r.checked))),r.check=(()=>r.checked=!0),r}),e.range=((t,s,r,i)=>{const n=e.input("range");return n.min=t,n.max=s,n.step=r>0?r:(s-t)/60,n.value=t,n.oninput=i,n}),e});class z extends ${constructor(){super()}get p(){return g()}set p(t){}get sz(){return g()}set cursor(t){this.setAttr("cursor",t)}get cursor(){return this.getAttr("cursor")}movable(t=null,s=null){this.cursor="pointer",this._onMove=t,b.oneStream(this.el,"mousedown","touchstart",t=>{s&&s(this.p,this),this.scene._move(this)})}moveTo(t,s=!1){if(t=d(t),!this._isMoving){if(this._isMoving=!0,this._onMove){const e=this._onMove(t,this,s);e&&(t=e)}this.p=t,delete this._isMoving}}set markerBeg(t){this.setAttr("marker-start",t)}set markerEnd(t){this.setAttr("marker-end",t)}arrowBeg(){this.markerBeg="url(#arrowBeg)"}arrowEnd(){this.markerEnd="url(#arrowEnd)"}}class N extends z{constructor(t){super(),this._p=d(t)}get p(){return this._p}set p(t){this._p=d(t),this._attrP()}_attrP(){}$attrs(){super.$attrs(),this._attrP()}}class O extends N{constructor(t,s){super(t),this._r=s}get r(){return this._r}set r(t){this._r=t,this._attrR()}_attrR(){}$attrs(){super.$attrs(),this._attrR()}set(t,s){this.p=t,this.r=s}}class C extends z{constructor(t,s){super(),this._p1=d(t),this._p2=d(s)}get p(){return this._p1}set p(t){t=d(t),this._p2=this._p2.add(t.sub(this._p1)),this._p1=t,this._attrP1(),this._attrP2()}get p1(){return this._p1}set p1(t){this._p1=d(t),this._attrP1()}get p2(){return this._p2}set p2(t){this._p2=d(t),this._attrP2()}get sz(){return this._p2.sub(this._p1)}set sz(t){this._p2=this._p1.add(d(t)),this.$attrP2()}set(t,s){this._p1=d(t),this._p2=d(s),this._attrP1(),this._attrP2()}ctr(){return this._p1.add(p2).div(2)}lgt(){return this._p2.sub(this._p1).lgt()}_attrP1(){}_attrP2(){}$attrs(){super.$attrs(),this._attrP1(),this._attrP2()}}class R extends z{constructor(t){super(),this._ps=t,this._sc=f(1),this._tr=g()}get p(){return this._ps.isEmpty?g():this._ps.first}set p(t){if(t=d(t),this._ps.isEmpty)return;const s=t.sub(this._ps.first);this._ps=this._ps.map(t=>t.add(s)),this._attrD()}get ps(){return this._ps}set ps(t){this._ps=t,this._attrD()}get sc(){return this._sc}set sc(t){this._sc=d(t),this._attrD()}get tr(){return this._tr}set tr(t){this._tr=d(t),this._attrD()}set(t,s=null,e=null){this._ps=t,s&&(this.sc=s),e&&(this.tr=e),this._attrD()}get trans(){let t=this._ps;return this._sc&&(t=t.map(t=>t.mul(this._sc))),this._tr&&(t=t.map(t=>t.add(this._tr))),t}_attrD(){}$attrs(){super.$attrs(),this._attrD()}}class L extends ${constructor(t){super(),this.el=E.elem("marker"),this.el.id=t}}class D extends L{constructor(t){super(t),this.setAttr("markerUnits","strokeWidth"),this.setAttr("markerWidth","5"),this.setAttr("markerHeight","4"),this.setAttr("orient","auto"),this.setAttr("viewBox","0 0 10 10"),this.setAttr("fill","black"),this.setAttr("refX","5"),this.setAttr("refY","5");const s=new Y;s.setAttr("d","M 10 0 L 0 5 L 10 10 z"),this.el.appendChild(s.el)}}class T extends L{constructor(t){super(t),this.setAttr("markerUnits","strokeWidth"),this.setAttr("markerWidth","5"),this.setAttr("markerHeight","4"),this.setAttr("orient","auto"),this.setAttr("viewBox","0 0 10 10"),this.setAttr("fill","black"),this.setAttr("refX","5"),this.setAttr("refY","5");const s=new Y;s.setAttr("d","M 0 0 L 10 5 L 0 10 z"),this.el.appendChild(s.el)}}class B extends C{constructor(t,s){super(t,s),this.el=E.elem("line"),this._lineAttrs()}closeTo(t){const s=this._p2.sub(this._p1),e=d(t).sub(this._p1),r=s.dot(e).div(s.mag()).clamp01();return this._p1.add(s.mul(r))}_attrP1(){this.setAttr("x1",this._p1.x),this.setAttr("y1",this._p1.y)}_attrP2(){this.setAttr("x2",this._p2.x),this.setAttr("y2",this._p2.y)}_lineAttrs(){this._attrP1(),this._attrP2()}$attrs(){super.$attrs(),this._lineAttrs()}}function W(t,s,e,r=null,i=null){const n=new B(s,e);return n.stroke=r,n.fill=i,t.front(n)}class q extends O{constructor(t,s){super(t,s),this.el=E.elem("circle"),this._circleAttrs()}get sz(){return f(2*this._r)}closeTo(t){return this._p.add(d(t).sub(this._p).unit().mul(this._r))}atr(t){return p(this._p.x.add(this._r.mul(l(t).cos())),this._p.y.sub(this._r.mul(l(t).sin())))}atp(t){let s=-l((t=this.closeTo(d(t)).sub(this._p).div(this._r)).y).asin();return 0>t.x&&(s=180-s),0>s&&(s+=360),s}_attrP(){this.setAttr("cx",this._p.x),this.setAttr("cy",this._p.y)}_attrR(){this.setAttr("r",this._r)}_circleAttrs(){this._attrP(),this._attrR()}$attrs(){super.$attrs(),this._circleAttrs()}}function F(t,s,e,r=null,i=null){const n=new q(s,e);return n.stroke=r,n.fill=i,t.front(n)}b.isTouch;class G extends N{constructor(t,s,e=null,r=null){super(t),this._s=s,this._size=e,this._font=r,this.el=E.elem("text"),this._labelAttrs()}center(){const t=this.el.getBBox();this.p=this.p.sub(p(t.width/2,-t.height/4))}leftBelow(){const t=this.el.getBBox();this.p=this.p.sub(p(t.width,-t.height))}get s(){return this._s}set s(t){this._s=t,this._attrText()}get font(){return this._font}set font(t){this._font=t,this._attrFont()}get size(){return this._size}set size(t){this._size=t,this._attrSize()}_attrP(){this.setAttr("x",this._p.x),this.setAttr("y",this._p.y)}_attrFont(){this.setAttr("font-family",this._font)}_attrSize(){this.setAttr("font-size",this._size)}_attrText(){this.el.textContent=this._s}_labelAttrs(){this.setAttr("x",this._p.x),this.setAttr("y",this._p.y),this._attrFont(),this._attrSize(),this._attrText()}$attrs(){super.$attrs(),this._labelAttrs()}}function X(t,s,e,r="black",i="none"){let n=new G(s,e);return n.fill=r,n.stroke=i,n=t.front(n),t instanceof M&&t.labels.push(n),n}class Y extends R{constructor(t=null){super(null==t?[]:t),this.el=E.elem("path"),this._pathAttrs()}_seg(t){return t.x.toFixed(1)+","+t.y.toFixed(1)+" "}_d(){let t="";if(this._ps.length>0){const s=this.trans;t+="M"+this._seg(s.first);for(let e in s.skip(1))t+="L"+this._seg(e)}return t}_attrD(){this.setAttr("d",this._d())}_pathAttrs(){this._attrD()}$attrs(){super.$attrs(),this._pathAttrs()}}class H extends Y{constructor(t=!0,s=null){super(s),this._stripEnds=t}_bezier(){const t=this._stripEnds?1:0,s=this._ps.length;if(s<3+2*t)return"";const e=this.trans;let r=e[0],i=e[0+t],n=e[1+t],h=e[2+t],o="M"+this._seg(i);for(let l=6,a=2+t;;){let u=n.sub(r).div(l),c=h.sub(i).div(l);if(o+="C"+this._seg(i.add(u))+this._seg(n.sub(c))+this._seg(n),++a>s-t)break;r=i,i=n,n=h,h=e[a<s?a:a-1]}return o}_d(){return this._bezier()}}const j=function(t,s=2){let e=new A(t).availableRectangle();s&&(e=p(e.x,e.x/s));let r=new I(t,e);return r._arrowBegEnd(),r};class I extends E{constructor(t,s=null){super(t,s),this.scene.interactive(),this.addClass("quint"),b.isTouch&&this.addClass("touch");const e=this.overDiv=E.div("overlay");this.el.appendChild(e),e.controls=(()=>(e._controls||e.appendChild(e._controls=E.div("controls")),e._controls)),e.centerAt=((t,s)=>{let e=t.style;e.position="absolute",e.left=s.x-t.clientWidth/2+"px",e.top=s.y-t.clientHeight/2+"px"}),this._margin=0}fbo(){return[this.fg,this.bg,this.overDiv]}_arrowBegEnd(){this._arrowBeg||this.svgElem.append((this._arrowBeg=new D("arrowBeg")).el),this._arrowEnd||this.svgElem.append((this._arrowEnd=new T("arrowEnd")).el)}get m(){return i(this._margin)}msz(t=14){this._margin=t=t.valueOf();const s=super.sz,e=s.x,r=s.y,n=t,h=e-t,o=t,l=r-t;return[i(h-n),i(l-o),i(e/2),i(r/2),i(n),i(h),i(o),i(l)]}radialGradient(t,s,e){let r;for(void 0==this._defs&&this.innerElem.append(this._defs=E.elem("defs")),void 0==this._rg&&(this._defs.append(this._rg=E.elem("radialGradient")),this._rg.id=t);r=this._rg.firstChild;)this._rg.removeChild(r);for(var i=0;i<s.length;++i){var n=E.elem("stop");this._rg.append(n),n.setAttribute("offset",s[i]),n.setAttribute("stop-color",e[i])}}}const U="Arial",J=12;class K extends M{constructor(t,s,e,r=null){super(),this.p=t;const i=p(s.x/e.x,s.y/e.y);for(let t=0;t<=e.x;++t){const e=t*i.x;W(this,p(e,0),p(e,s.y)).dottedStroke()}for(let t=0;t<=e.y;++t){const e=t*i.y;W(this,p(0,e),p(s.x,e)).dottedStroke()}if(r){const t=X(this,p(4,J),r,"none","blue");t.font=U,t.size=J}}}class Q extends H{constructor(){super(),this.ph=null,this.steady=null,this.set()}ampl(t,s=null){return null!=this.steady?this.steady:(null==s&&(s=this.ph),l(360*(t+s)).sin())}set(t=0,s=0,e=null,r=null){this.cycles=t.valueOf(),this.ph=s.valueOf(),this._setPath(e,r)}_setPath(t,s){let e=[];const r=this.cycles;if(r){const t=Math.ceil(12*r);for(let s=-1;s<=t+1;++s){let i=s/t*r;e.push(p(i,-this.ampl(i)))}}super.set(e,t,s)}}window.app_harmonic_motion=function(t){const s=j(t),[e,r,i]=s.fbo(),[n,h]=s.msz(),o=s.m,a=n/4;W(r,p(o,0),p(a,0),"black",3);const u=function(t,s=!0,e=null,r=null){const i=new H(s);return i.stroke=e,i.fill=r,t.front(i)}(r,!0,"gray");{let t=[];const s=28;for(let e=-1;e<=s+1;++e)t.push(p(l(90*e).sin(),1/s*e));u.set(t,null,[a/2,0])}const c=.8*o,_=F(r,[0,0],c,"green");_.fill="green";const[d,f]=[2*o+a,o],[m,x]=[n-a-o,h],A=function(t,s,e,r,i=null){return t.front(new K(s,e,r,i))}(r,p(d,f),p(m,x),p(12,4));let v=A.front(new Q);v.set(1,0,[m,x/2],[0,x/2]);let y=W(A,g(),g(),"green");y.width=3;let w=0;const b=360;function $(){!function(t){const[s,e]=[t,-v.ampl(t)];y.set(p(s*m,(e+1)*x/2),p(s*m,x/2)),u.sc=p(2*c/3,(e+1)*x/2-c+o),_.moveTo(p(a/2,o+(e+1)*x/2))}(w++/b),w%=b}let k,M=i.controls().range(0,1,.02,()=>(P=M.value,M.value=P,clearInterval(k),void(P>0&&(k=setInterval($,1e3/(P*b))))));var P;$()}}]);